---
namespace: investigate

state:
  $passage.visited: 0

onPassage:
  set:
    $passage.visited +: 1

---
Start:
  - [clearScreen: {}]
  - Narrator: This is another passage in the same namespace, defined in a different file!
  - Here let's show how we can use state to have nodes that are explorable at most once.
  - call: Investigate

Investigate:
  - You stand in a room. Before you is a computer, a fridge, and a cup of coffee.
  - Would you like to investigate any of them?
  - choices:
      if $Fridge.visited < 1: { fridge: Fridge }
      if $Coffee.visited < 1: { coffee: Coffee }
      if $Computer.visited < 1: { computer: Computer }
      yes: WhichOne
      no: Done
      ...: Done
  - call: Investigate

WhichOne:
  - Well, which one?
  - choices:
      if $Fridge.visited < 1: { fridge: Fridge }
      if $Coffee.visited < 1: { coffee: Coffee }
      if $Computer.visited < 1: { computer: Computer }

Coffee:
  - It's a cup of coffee.

Fridge:
  - It's a fridge. There's some moldy cheese in there. Gross!

Computer:
  - It's your computer. Wow, that desktop really needs some organization.

Done:
  - All done exploring, eh? Let's go check out another example then.
  - call: monster:Start
